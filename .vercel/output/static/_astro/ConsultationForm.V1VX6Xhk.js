import{c as b,j as e}from"./createLucideIcon.B4r6tY7Y.js";import{r as E}from"./index.Cd_vQiNd.js";import{C as j}from"./circle-check.CEptPmZB.js";import{C as A,a as O}from"./clock.C2OWfItx.js";import{G as I,M as C}from"./mail.BtM5S70w.js";import{C as F}from"./circle-alert.B22JAFYk.js";function D(e){const t=L(e),s=new ArrayBuffer(t.length),r=new DataView(s);for(let e=0;e<s.byteLength;e++)r.setUint8(e,t.charCodeAt(e));return s}const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L(e){e.length%4==0&&(e=e.replace(/==?$/,""));let t="",s=0,r=0;for(let a=0;a<e.length;a++)s<<=6,s|=U.indexOf(e[a]),r+=6,24===r&&(t+=String.fromCharCode((16711680&s)>>16),t+=String.fromCharCode((65280&s)>>8),t+=String.fromCharCode(255&s),s=r=0);return 12===r?(s>>=4,t+=String.fromCharCode(s)):18===r&&(s>>=2,t+=String.fromCharCode((65280&s)>>8),t+=String.fromCharCode(255&s)),t}const k=-1,P=-2,M=-3,z=-4,$=-5,B=-6;function G(e,t){return Q(JSON.parse(e),t)}function Q(e,t){if("number"==typeof e)return a(e,!0);if(!Array.isArray(e)||0===e.length)throw new Error("Invalid input");const s=e,r=Array(s.length);function a(e,n=!1){if(e===k)return;if(e===M)return NaN;if(e===z)return 1/0;if(e===$)return-1/0;if(e===B)return-0;if(n)throw new Error("Invalid input");if(e in r)return r[e];const o=s[e];if(o&&"object"==typeof o)if(Array.isArray(o))if("string"==typeof o[0]){const s=o[0],n=t?.[s];if(n)return r[e]=n(a(o[1]));switch(s){case"Date":r[e]=new Date(o[1]);break;case"Set":const t=new Set;r[e]=t;for(let e=1;e<o.length;e+=1)t.add(a(o[e]));break;case"Map":const n=new Map;r[e]=n;for(let e=1;e<o.length;e+=2)n.set(a(o[e]),a(o[e+1]));break;case"RegExp":r[e]=new RegExp(o[1],o[2]);break;case"Object":r[e]=Object(o[1]);break;case"BigInt":r[e]=BigInt(o[1]);break;case"null":const l=Object.create(null);r[e]=l;for(let e=1;e<o.length;e+=2)l[o[e]]=a(o[e+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const t=new(0,globalThis[s])(D(o[1]));r[e]=t;break}case"ArrayBuffer":{const t=D(o[1]);r[e]=t;break}default:throw new Error(`Unknown type ${s}`)}}else{const t=new Array(o.length);r[e]=t;for(let e=0;e<o.length;e+=1){const s=o[e];s!==P&&(t[e]=a(s))}}else{const t={};r[e]=t;for(const e in o){const s=o[e];t[e]=a(s)}}else r[e]=o;return r[e]}return a(0)}const T={actionName:"_action"},V=T,R={BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,CONTENT_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,MISDIRECTED_REQUEST:421,UNPROCESSABLE_CONTENT:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NETWORK_AUTHENTICATION_REQUIRED:511},Y=Object.entries(R).reduce(((e,[t,s])=>({...e,[s]:t})),{});class h extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(e){super(e.message),this.code=e.code,this.status=h.codeToStatus(e.code),e.stack&&(this.stack=e.stack)}static codeToStatus(e){return R[e]}static statusToCode(e){return Y[e]??"INTERNAL_SERVER_ERROR"}static fromJson(e){return q(e)?new J(e.issues):H(e)?new h(e):new h({code:"INTERNAL_SERVER_ERROR"})}}function H(e){return"object"==typeof e&&null!=e&&"type"in e&&"AstroActionError"===e.type}function q(e){return"object"==typeof e&&null!=e&&"type"in e&&"AstroActionInputError"===e.type&&"issues"in e&&Array.isArray(e.issues)}class J extends h{type="AstroActionInputError";issues;fields;constructor(e){super({message:`Failed to validate: ${JSON.stringify(e,null,2)}`,code:"BAD_REQUEST"}),this.issues=e,this.fields={};for(const t of e)if(t.path.length>0){const e=t.path[0].toString();this.fields[e]??=[],this.fields[e]?.push(t.message)}}}function v(e){return`?${new URLSearchParams({[T.actionName]:e}).toString()}`}function w(e){if("error"===e.type){let t;try{t=JSON.parse(e.body)}catch{return{data:void 0,error:new h({message:e.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:h.fromJson(t),data:void 0}}return"empty"===e.type?{data:void 0,error:void 0}:{data:G(e.body,{URL:e=>new URL(e)}),error:void 0}}const W="%2E";function _(e={},t=""){return new Proxy(e,{get(e,s){if(s in e||"symbol"==typeof s)return e[s];const r=t+encodeURIComponent(s.toString()).replaceAll(".",W);function a(e){return S(e,r)}return Object.assign(a,{queryString:v(r),toString:()=>a.queryString,$$FORM_ACTION:function(){return{method:"POST",name:"_astroAction",action:"?"+new URLSearchParams(a.toString()).toString()}},async orThrow(e){const{data:t,error:s}=await S(e,r);if(s)throw s;return t}}),_(a,r+".")}})}function X(e){return`${"/".replace(/\/$/,"")}/_actions/${new URLSearchParams(e.toString()).get(V.actionName)}`}async function S(e,t,s){const r=new Headers;r.set("Accept","application/json");let a=e;if(!(a instanceof FormData)){try{a=JSON.stringify(e)}catch(e){throw new h({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${e.message}`})}a?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const n=await fetch(X({toString:()=>v(t)}),{method:"POST",body:a,headers:r});return 204===n.status?w({type:"empty",status:204}):w({type:n.ok?"data":"error",body:await n.text()})}const Z=_(),K=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ee=b("loader-circle",K),te=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],se=b("message-square",te),re=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ae=b("send",re),ne=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],oe=b("sparkles",ne),le=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ie=b("user",le),ce=["13:00〜13:55","14:00〜14:55","15:00〜15:55","16:00〜16:55","17:00〜17:55","18:00〜18:55","19:00〜19:55","20:00〜20:55"],de=(e=4)=>{const t=[],s=new Date;let r=(6-s.getDay()+7)%7;0===r&&s.getHours()>=20&&(r=7);const a=new Date(s);a.setDate(s.getDate()+r);for(let s=0;s<e;s++){const e=new Date(a);e.setDate(a.getDate()+7*s),t.push(e)}return t},ue=e=>`${e.getMonth()+1}月${e.getDate()}日(土)`;function be(){const[t,s]=E.useState(!1),[r,a]=E.useState(null),[n,o]=E.useState(""),[l,i]=E.useState([]),[c,d]=E.useState(""),[x,m]=E.useState("");E.useEffect((()=>{i(de(5))}),[]);return"success"===r?e.jsxs("div",{className:"bg-white border border-[#009DE0]/20 rounded-2xl p-10 text-center max-w-2xl mx-auto my-10 shadow-xl animate-fade-in relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[#009DE0] to-[#D6DE26]"}),e.jsx("div",{className:"w-24 h-24 bg-[#009DE0]/10 text-[#009DE0] rounded-full flex items-center justify-center mx-auto mb-8",children:e.jsx(j,{size:48,strokeWidth:1.5})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-[#334455] mb-4 font-serif",children:"ご予約ありがとうございました"}),e.jsxs("p",{className:"text-[#334455]/80 leading-relaxed mb-8 text-lg",children:["無料相談のご予約を承りました。",e.jsx("br",{}),"ご入力いただいたメールアドレス宛に、",e.jsx("br",{}),e.jsx("strong",{children:"当日のご案内メール（予約確定）"}),"をお送りしましたのでご確認ください。"]}),e.jsxs("div",{className:"bg-[#F8FAFC] p-6 rounded-xl inline-block text-left mb-8 border border-[#009DE0]/10",children:[e.jsxs("p",{className:"text-sm text-[#334455] font-bold mb-2 flex items-center gap-2",children:[e.jsx(A,{size:16,className:"text-[#009DE0]"}),"ご予約日時"]}),e.jsxs("p",{className:"text-xl text-[#009DE0] font-bold",children:[c," ",x]})]}),e.jsx("br",{}),e.jsx("button",{onClick:()=>window.location.reload(),className:"text-[#009DE0] font-bold hover:text-[#008ac4] underline hover:no-underline transition-all",children:"トップページへ戻る"})]}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl shadow-2xl my-10 border border-[#009DE0]/10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-48 bg-gradient-to-br from-[#009DE0]/10 to-transparent pointer-events-none"}),e.jsx("div",{className:"absolute top-[-50px] right-[-50px] w-64 h-64 bg-[#D6DE26]/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 p-8 md:p-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-[#009DE0]/10 text-[#009DE0] px-4 py-1 rounded-full text-sm font-bold mb-6 tracking-wider",children:[e.jsx(oe,{size:16})," 土曜限定・個別対応"]}),e.jsxs("h2",{className:"font-serif text-3xl md:text-4xl font-bold text-[#334455] mb-6 leading-tight",children:["無料相談 予約フォーム",e.jsx("span",{className:"block h-1 w-24 bg-gradient-to-r from-[#009DE0] to-[#D6DE26] mx-auto mt-4 rounded-full"})]}),e.jsxs("p",{className:"text-[#334455]/80 text-base md:text-lg leading-relaxed max-w-xl mx-auto",children:["さとう数理塾の個別指導を体験してみませんか？",e.jsx("br",{}),"土曜日の午後、じっくりと学習相談を承ります。"]})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!c||!x)return o("ご希望の相談日時を選択してください。"),void a("error");s(!0),a(null),o("");const t=new FormData(e.target),r=`${c} ${x}`;t.append("reservationDate",r);try{const{data:s,error:r}=await Z.sendConsultation(t);r?(a("error"),o(r.message||"送信中にエラーが発生しました。")):(a("success"),e.target.reset())}catch{a("error"),o("予期せぬエラーが発生しました。")}finally{s(!1)}},className:"space-y-12",children:[e.jsxs("div",{className:"bg-[#F8FAFC] p-6 md:p-8 rounded-2xl border border-[#334455]/5 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-2 h-full bg-[#009DE0]"}),e.jsxs("h3",{className:"flex items-center gap-3 text-xl font-bold text-[#334455] mb-8 pb-4 border-b border-[#334455]/10",children:[e.jsx(A,{size:28,className:"text-[#009DE0]"}),e.jsxs("div",{children:["ご希望の日時を選択",e.jsx("p",{className:"text-sm text-[#EA5514] font-normal mt-1",children:"*必須項目です"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("p",{className:"text-base text-[#334455] mb-4 font-bold flex items-center gap-2",children:[e.jsx("span",{className:"bg-[#334455] text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"1"}),"日程を選ぶ (土曜開催)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:l.map(((t,s)=>{const r=ue(t),a=c===r;return e.jsxs("button",{type:"button",onClick:()=>d(r),className:"py-4 px-2 rounded-xl text-sm font-bold border-2 transition-all relative overflow-hidden group "+(a?"bg-[#009DE0] text-white border-[#009DE0] shadow-md transform -translate-y-1":"bg-white text-[#334455] border-[#334455]/10 hover:border-[#009DE0] hover:text-[#009DE0] hover:shadow-sm"),children:[e.jsx("span",{className:"relative z-10",children:r}),!a&&e.jsx("div",{className:"absolute inset-0 bg-[#009DE0]/5 scale-0 group-hover:scale-100 transition-transform origin-center rounded-xl"})]},s)}))})]}),e.jsxs("div",{className:"transition-all duration-500 "+(c?"opacity-100":"opacity-50 pointer-events-none blur-sm"),children:[e.jsxs("p",{className:"text-base text-[#334455] mb-4 font-bold flex items-center gap-2",children:[e.jsx("span",{className:"bg-[#334455] text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"2"}),"時間を選ぶ",e.jsx(O,{size:18,className:"text-[#334455]/50"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:ce.map(((t,s)=>{const r=x===t;return e.jsx("button",{type:"button",onClick:()=>m(t),className:"py-3 px-1 rounded-lg text-sm font-medium border-2 transition-all "+(r?"bg-[#D6DE26] text-[#334455] border-[#D6DE26] font-bold shadow-sm":"bg-white text-[#334455] border-[#334455]/10 hover:bg-[#D6DE26]/20 hover:border-[#D6DE26]/50"),children:t},s)}))})]}),c&&x&&e.jsxs("div",{className:"mt-8 p-6 bg-[#009DE0]/5 border-2 border-[#009DE0] rounded-xl flex flex-col md:flex-row items-center justify-center gap-4 animate-fade-in",children:[e.jsx(j,{size:32,className:"text-[#009DE0]"}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("p",{className:"text-sm text-[#334455]/70 font-bold mb-1",children:"選択中の日時"}),e.jsxs("span",{className:"text-[#334455] font-bold text-xl",children:[e.jsx("span",{className:"text-[#009DE0]",children:c})," の ",e.jsx("span",{className:"text-[#009DE0]",children:x})]})]})]})]}),e.jsxs("div",{className:"space-y-8 px-2",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"name",className:"flex items-center gap-2 text-sm font-bold text-[#334455] mb-2 group-focus-within:text-[#009DE0] transition-colors",children:[e.jsx(ie,{size:20,className:"text-[#009DE0]"}),"お名前 ",e.jsx("span",{className:"text-[#EA5514] text-xs ml-1",children:"*必須"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,placeholder:"例：佐藤 太郎",className:"w-full px-4 py-4 rounded-xl bg-[#F8FAFC] border-2 border-[#334455]/10 focus:bg-white focus:border-[#009DE0] outline-none transition-all shadow-sm"})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"grade",className:"flex items-center gap-2 text-sm font-bold text-[#334455] mb-2 group-focus-within:text-[#009DE0] transition-colors",children:[e.jsx(I,{size:20,className:"text-[#009DE0]"}),"学年 ",e.jsx("span",{className:"text-[#EA5514] text-xs ml-1",children:"*必須"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"grade",id:"grade",required:!0,defaultValue:"",className:"w-full px-4 py-4 rounded-xl bg-[#F8FAFC] border-2 border-[#334455]/10 focus:bg-white focus:border-[#009DE0] outline-none appearance-none cursor-pointer shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"選択してください"}),e.jsx("option",{value:"中1",children:"中学1年生"}),e.jsx("option",{value:"中2",children:"中学2年生"}),e.jsx("option",{value:"中3",children:"中学3年生"}),e.jsx("option",{value:"高1",children:"高校1年生"}),e.jsx("option",{value:"高2",children:"高校2年生"}),e.jsx("option",{value:"高3",children:"高校3年生"}),e.jsx("option",{value:"その他",children:"その他"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-[#334455]/50",children:e.jsx("svg",{className:"fill-current h-5 w-5",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"email",className:"flex items-center gap-2 text-sm font-bold text-[#334455] mb-2 group-focus-within:text-[#009DE0] transition-colors",children:[e.jsx(C,{size:20,className:"text-[#009DE0]"}),"メールアドレス ",e.jsx("span",{className:"text-[#EA5514] text-xs ml-1",children:"*必須"})]}),e.jsx("input",{type:"email",name:"email",id:"email",required:!0,placeholder:"example@email.com",className:"w-full px-4 py-4 rounded-xl bg-[#F8FAFC] border-2 border-[#334455]/10 focus:bg-white focus:border-[#009DE0] outline-none transition-all shadow-sm"})]}),e.jsxs("div",{className:"group",children:[e.jsxs("label",{htmlFor:"message",className:"flex items-center gap-2 text-sm font-bold text-[#334455] mb-2 group-focus-within:text-[#009DE0] transition-colors",children:[e.jsx(se,{size:20,className:"text-[#009DE0]"}),"今の悩み・相談したいこと ",e.jsx("span",{className:"text-[#EA5514] text-xs ml-1",children:"*必須"})]}),e.jsx("textarea",{name:"message",id:"message",rows:"5",required:!0,placeholder:"「数学のテストが30点台で...」など、簡単で構いませんのでご記入ください。",className:"w-full px-4 py-4 rounded-xl bg-[#F8FAFC] border-2 border-[#334455]/10 focus:bg-white focus:border-[#009DE0] outline-none resize-y transition-all shadow-sm"})]})]}),"error"===r&&e.jsxs("div",{className:"flex items-center gap-3 bg-red-50 text-red-600 p-6 rounded-xl text-base border-2 border-red-100 animate-pulse",children:[e.jsx(F,{size:24,className:"flex-shrink-0"}),e.jsx("p",{className:"font-bold",children:n})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:t,className:"w-full font-bold py-5 rounded-full shadow-xl transition-all duration-300 flex justify-center items-center text-xl gap-3 "+(t?"bg-gray-300 cursor-not-allowed text-white shadow-none":"bg-gradient-to-r from-[#009DE0] to-[#008ac4] hover:from-[#008ac4] hover:to-[#0078b0] text-white hover:shadow-2xl hover:-translate-y-1"),children:t?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"animate-spin",size:28}),"送信中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:24}),"この内容で予約を申し込む"]})})})]})]})]})}export{be as default};